---
phase: 10-final-validation
plan: 03
type: execute
---

<objective>
Add essential ARIA accessibility labels and perform final project validation.

Purpose: Frontend currently has 0 ARIA labels, making it inaccessible to screen readers. Add critical accessibility attributes to high-traffic components and verify all project success criteria are met.
Output: ARIA labels on key interactive elements, final verification checklist confirming all 18 concerns addressed.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Concerns addressed:**
- L3 (Accessibility Concerns) - partial, focused on critical ARIA labels
- L4 (Missing Error Recovery Documentation) - defer to future (docs exist, just needs linkage)
- L7 (No Analytics Integration) - out of scope for test worktree
- L8 (PWA Caching Overly Restrictive) - defer (current conservative approach is safe)

**Current accessibility state (from exploration):**
- 0 aria-label attributes anywhere in frontend
- 0 role attributes
- 0 tabindex attributes
- Semantic HTML is used (form, button, input)
- Proper label associations for form inputs exist

**Priority components for ARIA labels:**
1. Chat interface (chatbot-ui.js) - main interactive feature
2. Navigation (sidebar, mobile menu)
3. Toast notifications (showToast utility)
4. Modal dialogs (TimeoutWarningModal)
5. Status badges and indicators

**Scope limitation:**
This plan focuses on ARIA labels for existing elements, NOT:
- Full WCAG AA compliance audit
- Keyboard navigation implementation
- Color contrast verification
- Screen reader testing
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add ARIA labels to chat interface</name>
  <files>frontend/public/js/chatbot-ui.js, frontend/public/js/chatbot-components.js</files>
  <exploration>
    Use Explore agent to find chat UI elements that need ARIA labels:
    - Message input area
    - Send button
    - Chat message container (for aria-live)
    - Tool execution status indicators
    - Confirmation dialogs within chat
  </exploration>
  <action>
Add ARIA attributes to chat interface elements:

1. Message input:
   - aria-label="Type your message"
   - aria-describedby pointing to help text if exists

2. Send button:
   - aria-label="Send message"

3. Chat message container:
   - role="log"
   - aria-live="polite" for new messages
   - aria-label="Chat messages"

4. Individual messages:
   - role="article" or appropriate role
   - aria-label describing message type (user message, assistant response, tool result)

5. Loading/typing indicator:
   - aria-live="polite"
   - aria-label="Assistant is typing"

6. Tool execution status:
   - aria-live="assertive" for important status changes
   - aria-label describing current tool action

Pattern for adding ARIA in JavaScript:
```javascript
element.setAttribute('aria-label', 'Description');
element.setAttribute('role', 'log');
element.setAttribute('aria-live', 'polite');
```

Focus on the main chat flow - message input, message display, and status indicators.
  </action>
  <verify>
- Browser DevTools Accessibility panel shows ARIA labels on chat elements
- No JavaScript errors on chat page load
- Chat functionality still works normally
  </verify>
  <done>Chat interface has essential ARIA labels for screen reader accessibility</done>
</task>

<task type="auto">
  <name>Task 2: Add ARIA labels to navigation and notifications</name>
  <files>frontend/src/js/components/mobileMenu.js, frontend/src/js/utils/ui/showToast.js, frontend/src/js/components/TimeoutWarningModal.js</files>
  <exploration>
    Use Explore agent to find navigation and notification elements:
    - Sidebar navigation links
    - Mobile menu toggle button
    - Toast notification container
    - Modal dialog structure
  </exploration>
  <action>
1. Mobile menu toggle:
   - aria-label="Open menu" / "Close menu" (toggle based on state)
   - aria-expanded="true/false"
   - aria-controls="mobile-menu-id"

2. Navigation links:
   - aria-current="page" for active page
   - Ensure proper focus order

3. Toast notifications:
   - role="alert" for errors
   - role="status" for success/info
   - aria-live="assertive" for important notifications
   - aria-live="polite" for informational toasts

4. Timeout warning modal:
   - role="alertdialog"
   - aria-modal="true"
   - aria-labelledby pointing to title
   - aria-describedby pointing to description
   - Focus management (trap focus in modal)

Pattern for toasts:
```javascript
const toast = document.createElement('div');
toast.setAttribute('role', type === 'error' ? 'alert' : 'status');
toast.setAttribute('aria-live', type === 'error' ? 'assertive' : 'polite');
```

Pattern for modals:
```javascript
modal.setAttribute('role', 'alertdialog');
modal.setAttribute('aria-modal', 'true');
modal.setAttribute('aria-labelledby', 'modal-title');
```
  </action>
  <verify>
- Toast notifications have role and aria-live attributes
- Mobile menu has aria-expanded state
- Modal has proper dialog role
- No JavaScript errors
  </verify>
  <done>Navigation and notification components have ARIA labels</done>
</task>

<task type="auto">
  <name>Task 3: Final project verification and cleanup</name>
  <files>.planning/STATE.md, .planning/ROADMAP.md</files>
  <action>
Perform final verification of all project success criteria from PROJECT.md:

1. **Run verification commands:**
   ```bash
   # Backend print statements (should be 0 or minimal)
   grep -r "print(" backend/app --include="*.py" | wc -l

   # Frontend console statements (should use logger utility)
   grep -r "console\." frontend/src frontend/public --include="*.js" | wc -l

   # Any type usages
   grep -r ": Any" backend/app --include="*.py" | wc -l

   # Test suite
   cd backend && pytest --tb=short

   # Build verification
   cd frontend && npm run build
   ```

2. **Update STATE.md with final status:**
   - Mark Phase 10 complete
   - Update progress percentage to 100%
   - Document final metrics

3. **Update ROADMAP.md:**
   - Mark Phase 10 complete
   - Update concerns coverage table
   - Add completion date

4. **Create final verification checklist in summary:**

   From PROJECT.md success criteria:
   - [ ] All 18 issues from COMPREHENSIVE_CONCERNS_SPEC.md addressed
   - [ ] Console/print statements removed or using logger
   - [ ] Any type usages addressed (documented exceptions for external APIs)
   - [ ] Unsafe DOM assignments sanitized (Phase 7)
   - [ ] Deprecated tool exports removed (Phase 5)
   - [ ] Secrets rotation skipped (test worktree)
   - [ ] chatbot-v2.js modularized (Phase 6)
   - [ ] Test coverage maintained/improved
   - [ ] Sentry infrastructure added (Plan 10-01)
   - [ ] Accessibility improvements added (Plan 10-03)

Note: Some concerns were deferred (Phase 9 calendar sync) or skipped (secrets rotation in test worktree). Document these clearly.
  </action>
  <verify>
- STATE.md shows Phase 10 complete
- ROADMAP.md shows all applicable phases complete
- All verification commands run successfully
- Final metrics documented
  </verify>
  <done>Project validation complete, all documentation updated, Phase 10 finished</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Chat interface has ARIA labels (aria-live, roles)
- [ ] Toast notifications have role="alert" or role="status"
- [ ] Modal has role="alertdialog" and aria-modal
- [ ] Navigation has aria-expanded for toggles
- [ ] All tests still pass: pytest backend/tests/
- [ ] Frontend builds: npm run build
- [ ] STATE.md updated with final status
- [ ] ROADMAP.md shows Phase 10 complete
</verification>

<success_criteria>
- Essential ARIA labels added to chat, navigation, and notifications
- No JavaScript errors introduced
- All existing functionality preserved
- Project state documentation reflects completion
- Clear documentation of what was addressed vs deferred
</success_criteria>

<output>
After completion, create `.planning/phases/10-final-validation/10-03-SUMMARY.md`

This summary should include:
- Final metrics (console statements, tests, coverage)
- Concerns addressed vs deferred
- Recommendations for future work
- Phase 10 and overall project completion status
</output>
