---
phase: 06-frontend-monolith-decomposition
plan: 01
type: execute
---

<objective>
Delete dead code (chatbot.js) and update project documentation to reflect the actual architecture.

Purpose: Clean up 8,153 lines of dead code and correct documentation that incorrectly describes chatbot.js as the production file.
Output: chatbot.js deleted, documentation updated, git clean.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Discovery findings:**
- chatbot.js (8,153 lines) is NOT loaded by any HTML file - it's dead code
- chatbot-v2.js (2,772 lines) IS the production code, loaded by all 13 HTML pages
- The modular architecture already exists:
  - chatbot-v2.js (2,772 lines) - main component
  - chatbot-utils.js (308 lines) - page context, storage
  - chatbot-history.js (577 lines) - history manager
  - chatbot-sidebar.js (540 lines) - sidebar UI

**Files to delete:**
- frontend/public/js/chatbot.js (8,153 lines, 122 console.log statements)

**Documentation to update:**
- .planning/PROJECT.md - references chatbot.js as 8,153 line monolith
- .planning/ROADMAP.md - references chatbot.js split
- .planning/COMPREHENSIVE_CONCERNS_SPEC.md - lists chatbot.js stats
- .planning/codebase/STRUCTURE.md - lists chatbot.js
- .planning/codebase/CONCERNS.md - lists chatbot.js console.log count
- docs/ARCHITECTURE.md - mentions chatbot.js
- CLAUDE.md - lists chatbot.js
- frontend/vite.config.js - has external reference to chatbot.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete chatbot.js (dead code)</name>
  <files>frontend/public/js/chatbot.js</files>
  <action>
    Delete frontend/public/js/chatbot.js entirely.

    This file:
    - Contains 8,153 lines of JavaScript
    - Has 122 console.log/warn/error statements
    - Is NOT loaded by any HTML file (verified via grep)
    - Has been superseded by chatbot-v2.js

    Simply delete the file. No backup needed - it's in git history.
  </action>
  <verify>
    ls frontend/public/js/chatbot.js should return "No such file"
    The frontend should still work (chatbot-v2.js is the actual code)
  </verify>
  <done>chatbot.js deleted, 8,153 lines of dead code removed</done>
</task>

<task type="auto">
  <name>Task 2: Update vite.config.js external reference</name>
  <files>frontend/vite.config.js</files>
  <action>
    Remove or update the external reference to chatbot.js in vite.config.js.

    Current line: external: ['/js/chatbot.js']

    Since chatbot.js is deleted, this external reference is now invalid.
    Either remove the line entirely or update to reference chatbot-v2.js if needed.
  </action>
  <verify>grep "chatbot.js" frontend/vite.config.js returns nothing</verify>
  <done>vite.config.js no longer references deleted chatbot.js</done>
</task>

<task type="auto">
  <name>Task 3: Update project documentation</name>
  <files>
    .planning/PROJECT.md
    .planning/ROADMAP.md
    CLAUDE.md
  </files>
  <action>
    Update documentation to reflect actual architecture:

    1. PROJECT.md:
       - Change "8,153-line chatbot.js monolith" to "chatbot-v2.js (2,772 lines) with 3 supporting modules"
       - Update success criteria: "chatbot.js split into 6+ modules" → "chatbot-v2.js modularized into 8+ focused files"
       - Update "chatbot.js split" references

    2. ROADMAP.md:
       - Update Phase 6 description: "Split chatbot.js" → "Modularize chatbot-v2.js"
       - Update goal: "8,153 lines" → "2,772 lines"
       - Clarify chatbot-v2.js is already production code

    3. CLAUDE.md:
       - Update Key files section: "chatbot.js (8,153 lines)" → "chatbot-v2.js (2,772 lines)"
       - Remove chatbot-v2.js from the list (it's the main file now)
  </action>
  <verify>
    grep -r "8,153" .planning/ CLAUDE.md returns nothing
    grep "chatbot-v2" .planning/PROJECT.md returns updated references
  </verify>
  <done>Project documentation reflects actual chatbot-v2.js architecture</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] chatbot.js file no longer exists
- [ ] frontend/vite.config.js has no chatbot.js reference
- [ ] grep -r "chatbot.js.*8,153" . returns nothing
- [ ] Documentation references chatbot-v2.js as the main chatbot file
</verification>

<success_criteria>
- chatbot.js (8,153 lines) deleted
- vite.config.js updated
- PROJECT.md, ROADMAP.md, CLAUDE.md updated
- No broken references to chatbot.js
</success_criteria>

<output>
After completion, create `.planning/phases/06-frontend-monolith-decomposition/06-01-SUMMARY.md`:

# Phase 6 Plan 01: Dead Code Cleanup Summary

**Deleted 8,153 lines of dead code (chatbot.js) and updated documentation to reflect chatbot-v2.js as the production architecture.**

## Accomplishments
- Deleted chatbot.js (8,153 lines of dead code)
- Updated vite.config.js to remove invalid reference
- Updated PROJECT.md, ROADMAP.md, CLAUDE.md with accurate architecture info

## Files Created/Modified
- `frontend/public/js/chatbot.js` - DELETED
- `frontend/vite.config.js` - Removed chatbot.js external
- `.planning/PROJECT.md` - Updated to reflect chatbot-v2.js
- `.planning/ROADMAP.md` - Updated Phase 6 description
- `CLAUDE.md` - Updated key files section

## Decisions Made
- Confirmed chatbot.js is safe to delete (not loaded anywhere)
- chatbot-v2.js (2,772 lines) is the production chatbot

## Issues Encountered
None

## Next Step
Ready for 06-02-PLAN.md: Extract API and Actions modules from chatbot-v2.js
</output>
