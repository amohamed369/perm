---
phase: 08-frontend-comprehensive-cleanup
plan: 02
type: execute
---

<objective>
Convert auth and sync files to use logger utility.

Purpose: Standardize logging in authentication and calendar sync code.
Output: calendarSync.js, tokenRefresh.js, googleAuth.js converted to logger (~32 statements).
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-frontend-comprehensive-cleanup/08-01-SUMMARY.md

**Files to clean (this plan):**
- calendarSync.js: 11 statements (broadcast events, sync status)
- tokenRefresh.js: 11 statements (token lifecycle)
- googleAuth.js: 10 statements (OAuth flow logging)

**Logging patterns to follow:**
- [CalendarSync], [TokenRefresh] prefixes → Use logger (adds [PERM] prefix automatically)
- OAuth errors → Use logger.force.error for critical auth failures
- Token lifecycle → Use logger.log/debug for dev visibility

@frontend/src/js/utils/logger.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert calendarSync.js to logger (11 statements)</name>
  <files>frontend/src/js/utils/calendarSync.js</files>
  <action>
    1. Add import: `import { logger } from './logger.js';`
    2. Convert all console.log → logger.log
    3. Convert all console.warn → logger.warn
    4. Convert all console.error → logger.error

    These are broadcast/sync status events - dev-only visibility is appropriate.
    Remove the [CalendarSync] prefix since logger adds [PERM].
  </action>
  <verify>
    - grep "console\." frontend/src/js/utils/calendarSync.js | wc -l should return 0
    - npm run build passes
  </verify>
  <done>calendarSync.js uses logger (11 → 0)</done>
</task>

<task type="auto">
  <name>Task 2: Convert tokenRefresh.js to logger (11 statements)</name>
  <files>frontend/src/js/utils/auth/tokenRefresh.js</files>
  <action>
    1. Add import: `import { logger } from '../logger.js';`
    2. Convert all console.log → logger.log
    3. Convert all console.warn → logger.warn
    4. Convert all console.error → logger.error

    Token refresh failures are important for debugging but not critical in production.
    The [TokenRefresh] prefix can be removed since logger adds [PERM].
  </action>
  <verify>
    - grep "console\." frontend/src/js/utils/auth/tokenRefresh.js | wc -l should return 0
    - npm run build passes
  </verify>
  <done>tokenRefresh.js uses logger (11 → 0)</done>
</task>

<task type="auto">
  <name>Task 3: Convert googleAuth.js to logger (10 statements)</name>
  <files>frontend/src/js/utils/auth/googleAuth.js</files>
  <action>
    1. Add import: `import { logger } from '../logger.js';`
    2. Convert console.log → logger.log (OAuth flow debug info)
    3. Convert console.warn → logger.warn (FedCM fallback notices)
    4. Convert console.error → logger.force.error for critical auth failures

    Note: OAuth failures that prevent login should use logger.force.error so they're visible in production for debugging user issues.
  </action>
  <verify>
    - grep "console\." frontend/src/js/utils/auth/googleAuth.js | wc -l should return 0
    - npm run build passes
  </verify>
  <done>googleAuth.js uses logger (10 → 0)</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] calendarSync.js, tokenRefresh.js, googleAuth.js have no console statements
- [ ] All three files import and use logger
- [ ] Total console count reduced by ~32 (from ~80 to ~48)
</verification>

<success_criteria>
- All auth/sync files use logger
- No console statements in these files
- No build errors
- Ready for next plan
</success_criteria>

<output>
After completion, create `.planning/phases/08-frontend-comprehensive-cleanup/08-02-SUMMARY.md`
</output>
