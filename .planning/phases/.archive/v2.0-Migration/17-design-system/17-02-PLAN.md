---
phase: 17-design-system
plan: 02
type: execute
domain: frontend-design
---

<critical_requirement>
**MANDATORY SUBAGENT INSTRUCTION**: When using the Task tool to spawn ANY subagent for frontend/UI work in this plan, you MUST include this instruction in the subagent's prompt:

"BEFORE doing any work, you MUST read /Users/adammohamed/cc/perm-tracker-test/.planning/FRONTEND_DESIGN_SKILL.md in its entirety and apply all design principles from that document. This file contains critical design guidance for PERM Tracker v2 including neobrutalist styling, color tokens, and typography requirements. Do not proceed until you have read and internalized this skill."

This is a BLOCKING requirement. Every Task tool call for UI/frontend work must include this instruction.
</critical_requirement>

<objective>
Build core UI primitives with neobrutalist styling: Button, Card, Badge, Input, Label, Dialog, Toast.

Purpose: Create the foundational component library that all pages will use. These are styled shadcn/ui components with hard shadows, black borders, and Forest Green accent.
Output: 7 core components in src/components/ui/ with neobrutalist styling applied.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/FRONTEND_DESIGN_SKILL.md
@.planning/V2_DESIGN_TOKENS.json
@.planning/phases/17-design-system/17-CONTEXT.md
@.planning/phases/17-design-system/17-RESEARCH.md
@.planning/phases/17-design-system/17-01-SUMMARY.md

**Prior plan completion:**
- 17-01: Dependencies installed (motion, next-themes, tw-animate-css, etc.)
- 17-01: cn() utility at @/lib/utils
- 17-01: globals.css with design tokens configured
- 17-01: ThemeProvider wrapping app

**From RESEARCH.md:**
- Use shadcn/ui CLI to add base components, then customize
- Apply neobrutalist base styles: `border-2 border-black shadow-hard active:translate-x-[2px] active:translate-y-[2px] active:shadow-none`
- Use class-variance-authority for variants
- Do NOT hand-roll accessible components - use shadcn/ui primitives

**Neobrutalist button pattern from RESEARCH.md:**
```tsx
const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border-2 border-black shadow-hard active:translate-x-[2px] active:translate-y-[2px] active:shadow-none",
  { variants: {...} }
)
```
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add and customize Button component</name>
  <files>v2/src/components/ui/button.tsx</files>
  <exploration>
    Read the installed components.json to understand path configuration.
    Check if shadcn/ui has already generated any components.
  </exploration>
  <action>
Add Button using shadcn CLI:
```bash
cd v2
npx shadcn@latest add button
```

Then customize v2/src/components/ui/button.tsx with neobrutalist styling:

1. Add to base classes (cva first argument):
   - `border-2 border-border` (uses CSS var)
   - `shadow-hard` (our hard shadow utility)
   - `active:translate-x-[2px] active:translate-y-[2px] active:shadow-none`
   - `transition-all duration-150` (snappy 150ms)

2. Ensure variants include:
   - default: Forest Green background
   - destructive: Red (#FF4747)
   - outline: transparent bg, visible border
   - secondary: muted background
   - ghost: no border, no shadow
   - link: no border, no shadow, underline

3. Add hard shadow to default and outline variants only (ghost/link stay flat)

Reference the RESEARCH.md Button pattern but integrate with existing shadcn structure.
  </action>
  <verify>
TypeScript compiles: `npx tsc --noEmit`
Test import: `import { Button } from "@/components/ui/button"` resolves
  </verify>
  <done>Button component with 6 variants, neobrutalist hard shadow press effect, 150ms transitions</done>
</task>

<task type="auto">
  <name>Task 2: Add and customize Card and Badge components</name>
  <files>v2/src/components/ui/card.tsx, v2/src/components/ui/badge.tsx</files>
  <action>
Add Card and Badge:
```bash
cd v2
npx shadcn@latest add card badge
```

Customize Card (v2/src/components/ui/card.tsx):
- Add `border-2 border-border shadow-hard` to Card component
- CardHeader, CardTitle, CardDescription, CardContent, CardFooter stay as generated
- Add hover state: `hover:shadow-hard-lg hover:-translate-y-[2px] transition-all duration-150`

Customize Badge (v2/src/components/ui/badge.tsx):
- Add `border-2 border-border` to base styles
- Keep variants: default, secondary, destructive, outline
- Ensure badge has `font-semibold` for readability
- No shadow on badges (too small)

**Badge variants for status colors will be created in 17-03 (status components).**
  </action>
  <verify>
TypeScript compiles: `npx tsc --noEmit`
Test imports resolve:
- `import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card"`
- `import { Badge } from "@/components/ui/badge"`
  </verify>
  <done>Card with hard shadow and hover lift, Badge with border styling, both dark-mode compatible</done>
</task>

<task type="auto">
  <name>Task 3: Add Input, Label, and form foundations</name>
  <files>v2/src/components/ui/input.tsx, v2/src/components/ui/label.tsx</files>
  <action>
Add Input and Label:
```bash
cd v2
npx shadcn@latest add input label
```

Customize Input (v2/src/components/ui/input.tsx):
- Add `border-2 border-border shadow-hard-sm` to base
- On focus: `focus:shadow-hard focus:ring-2 focus:ring-ring`
- Height: `h-10` (standard)
- Padding: `px-3 py-2`
- Ensure disabled state removes shadow: `disabled:shadow-none disabled:cursor-not-allowed`

Customize Label (v2/src/components/ui/label.tsx):
- Add `font-semibold` for readability
- Ensure uses font-body (Inter)

These are the building blocks for Phase 22 (Case Forms).
  </action>
  <verify>
TypeScript compiles: `npx tsc --noEmit`
Test imports resolve:
- `import { Input } from "@/components/ui/input"`
- `import { Label } from "@/components/ui/label"`
  </verify>
  <done>Input with hard shadow focus state, Label with proper font weight</done>
</task>

<task type="auto">
  <name>Task 4: Add Dialog and Toast components</name>
  <files>v2/src/components/ui/dialog.tsx, v2/src/components/ui/sonner.tsx</files>
  <action>
Add Dialog and Sonner (toast):
```bash
cd v2
npx shadcn@latest add dialog sonner
```

Customize Dialog (v2/src/components/ui/dialog.tsx):
- DialogContent: Add `border-2 border-border shadow-hard-lg`
- Ensure dark mode works (check for data-state styling)
- DialogOverlay: Keep as-is (dimmed background)

Note: Sonner is the shadcn/ui toast system. Add to providers:

Update v2/src/app/providers.tsx to include Toaster:
```tsx
import { Toaster } from "@/components/ui/sonner"

// Add <Toaster /> inside providers, after children
```

The Sonner component handles toast positioning and animations automatically.

**Do NOT hand-roll a toast system** - use Sonner as-is (per RESEARCH.md don't-hand-roll list).
  </action>
  <verify>
TypeScript compiles: `npx tsc --noEmit`
Test imports:
- `import { Dialog, DialogContent, DialogHeader, DialogTitle } from "@/components/ui/dialog"`
- `import { toast } from "sonner"`
  </verify>
  <done>Dialog with hard shadow, Toast system via Sonner integrated into providers</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] All 7 components exist in src/components/ui/
- [ ] Button has press effect (translate + shadow removal on active)
- [ ] Card has hover lift effect
- [ ] Input has shadow on focus
- [ ] Dialog has border and shadow
- [ ] No TypeScript errors
</verification>

<success_criteria>
- 7 components created: button, card, badge, input, label, dialog, sonner
- Neobrutalist styling applied: hard shadows, black borders, press effects
- Dark mode compatible (uses CSS variables)
- All components exportable and typed
- Toaster added to app providers
</success_criteria>

<output>
After completion, create `.planning/phases/17-design-system/17-02-SUMMARY.md`
</output>
