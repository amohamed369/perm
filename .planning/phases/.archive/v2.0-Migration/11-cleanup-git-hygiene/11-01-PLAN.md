---
phase: 11-cleanup-git-hygiene
plan: 01
type: execute
---

<objective>
Clean slate for v2.0 migration by removing stale files, reorganizing misplaced assets, and updating .gitignore.

Purpose: Eliminate technical debt and orphaned files before starting the Next.js + Convex migration.
Output: Clean repository with all files in proper locations, updated .gitignore, single commit.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/V2_MILESTONE_CONTEXT.md

**TEST WORKTREE CONTEXT:**
- This is `perm-tracker-test/` worktree on branch `test`
- All changes are LOCAL ONLY
- Safe to delete/move files without affecting production

**Cleanup Targets Identified:**

| Category | File/Directory | Action |
|----------|----------------|--------|
| Stale files | `firebase-debug.log` | Delete |
| Stale files | `perm-tracker-cases-2025-11-26.json` | Delete |
| Obsolete configs | `render.yaml` | Delete |
| Obsolete configs | `fix-render-env-vars.sh` | Delete |
| Obsolete configs | `test_oauth_flow.sh` | Delete |
| Misplaced file | `logo-min.png` | Move → `frontend/public/` |
| Misplaced file | `FIX_REFRESH_TOKENS.sql` | Move → `backend/database/adhoc-fixes/` |
| Duplicate | root `vercel.json` | Delete (keep `frontend/vercel.json`) |
| Orphaned dir | `/ai/` | Delete (old agent-foreman scripts) |
| Orphaned dir | `/tests/e2e/` | Move → `frontend/tests/e2e/` |
| .gitignore | Missing entries | Add `.next/`, `.convex/`, `frontend/dist/` |
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete stale and obsolete files</name>
  <files>
    firebase-debug.log,
    perm-tracker-cases-2025-11-26.json,
    render.yaml,
    fix-render-env-vars.sh,
    test_oauth_flow.sh,
    vercel.json,
    ai/
  </files>
  <action>
    Delete the following from repository root:

    1. Stale files (no longer needed):
       - `firebase-debug.log` - debug artifact
       - `perm-tracker-cases-2025-11-26.json` - old data export

    2. Obsolete configs (Render deployment replaced by Vercel):
       - `render.yaml` - old Render config
       - `fix-render-env-vars.sh` - old Render helper script
       - `test_oauth_flow.sh` - old OAuth test script

    3. Duplicate config:
       - `vercel.json` (root) - duplicate of `frontend/vercel.json`

    4. Orphaned directory:
       - `ai/` - old agent-foreman directory with `init.sh` and `feature_list.json`

    Use `rm -f` for files and `rm -rf` for directories.
    Run `git status` after to confirm deletions are staged.
  </action>
  <verify>
    ls firebase-debug.log perm-tracker-cases-2025-11-26.json render.yaml fix-render-env-vars.sh test_oauth_flow.sh vercel.json ai/ 2>&1 | grep -c "No such file" should equal 7
  </verify>
  <done>All 6 files and 1 directory deleted from repository root</done>
</task>

<task type="auto">
  <name>Task 2: Reorganize misplaced files</name>
  <files>
    logo-min.png → frontend/public/logo-min.png,
    FIX_REFRESH_TOKENS.sql → backend/database/adhoc-fixes/FIX_REFRESH_TOKENS.sql,
    tests/e2e/ → frontend/tests/e2e/
  </files>
  <action>
    Move misplaced files to their proper locations:

    1. Logo image:
       - `mv logo-min.png frontend/public/logo-min.png`
       - This is a frontend asset, belongs in public/

    2. SQL fix script:
       - `mv FIX_REFRESH_TOKENS.sql backend/database/adhoc-fixes/`
       - This is a database fix, belongs with other adhoc SQL fixes

    3. E2E tests:
       - Create `frontend/tests/` directory if it doesn't exist
       - `mv tests/e2e frontend/tests/e2e`
       - Then delete empty `tests/` directory: `rmdir tests`
       - Playwright tests belong with frontend code

    Run `git status` to confirm moves are staged as renames (not delete+add).
  </action>
  <verify>
    - ls frontend/public/logo-min.png (exists)
    - ls backend/database/adhoc-fixes/FIX_REFRESH_TOKENS.sql (exists)
    - ls frontend/tests/e2e/chatbot.spec.ts (exists)
    - ls logo-min.png FIX_REFRESH_TOKENS.sql tests/ 2>&1 | grep -c "No such file" should equal 3
  </verify>
  <done>3 items moved to proper locations, original locations empty</done>
</task>

<task type="auto">
  <name>Task 3: Update .gitignore and commit all changes</name>
  <files>.gitignore</files>
  <action>
    1. Update .gitignore to add Next.js and Convex entries for v2.0:

       Add these lines (near existing build outputs section):
       ```
       # Next.js + Convex (v2.0 migration)
       .next/
       .convex/
       frontend/dist/
       ```

       Note: `.next/` is already in .gitignore (line 85). Only add `.convex/` if missing.
       Check if `frontend/dist/` differs from existing `dist/` entry.

    2. Stage all changes:
       - `git add -A`

    3. Create single commit with descriptive message:
       ```
       chore(cleanup): remove stale files and reorganize assets for v2.0

       - Delete: firebase-debug.log, old JSON export, render.yaml, obsolete scripts
       - Delete: duplicate root vercel.json, orphaned ai/ directory
       - Move: logo-min.png → frontend/public/
       - Move: FIX_REFRESH_TOKENS.sql → backend/database/adhoc-fixes/
       - Move: tests/e2e/ → frontend/tests/e2e/
       - Update .gitignore for Next.js + Convex
       ```

    Do NOT push - this is a test worktree.
  </action>
  <verify>
    - git status shows clean working tree
    - git log -1 --oneline shows the cleanup commit
    - grep -c ".convex" .gitignore should return 1
  </verify>
  <done>.gitignore updated, all changes committed in single atomic commit</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] No stale files exist at root level (firebase-debug.log, JSON export, render.yaml, etc.)
- [ ] No orphaned directories exist (ai/, tests/)
- [ ] logo-min.png exists in frontend/public/
- [ ] FIX_REFRESH_TOKENS.sql exists in backend/database/adhoc-fixes/
- [ ] E2E tests exist in frontend/tests/e2e/
- [ ] .gitignore contains .convex/ entry
- [ ] git status is clean
- [ ] Single commit captures all changes
</verification>

<success_criteria>
- All 7 stale/obsolete items deleted
- All 3 misplaced items relocated
- .gitignore updated for v2.0 stack
- Clean git status with atomic commit
- Repository ready for Phase 12 (Feature Inventory)
</success_criteria>

<output>
After completion, create `.planning/phases/11-cleanup-git-hygiene/11-01-SUMMARY.md`:

# Phase 11 Plan 01: Cleanup + Git Hygiene Summary

**[One-liner: what was accomplished]**

## Accomplishments
- [List of completed cleanup tasks]

## Files Deleted
- [List of removed files/directories]

## Files Moved
- [Source → Destination for each move]

## Decisions Made
- [Any decisions made during execution, or "None"]

## Issues Encountered
- [Problems and resolutions, or "None"]

## Next Step
Ready for Phase 12 (Feature Inventory + Archive)
</output>
