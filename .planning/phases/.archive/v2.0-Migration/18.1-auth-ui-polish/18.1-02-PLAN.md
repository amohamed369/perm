---
phase: 18.1-auth-ui-polish
plan: 02
type: execute
---

<objective>
Add loading/feedback states and verify auth UI polish with human review.

Purpose: Every interaction needs visual feedback. Loading spinners, button states, and skeleton components complete the professional UX.
Output: Reusable loading components, polished interaction states, Storybook documentation.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/FRONTEND_DESIGN_SKILL.md
@.planning/phases/18.1-auth-ui-polish/18.1-CONTEXT.md
@.planning/phases/18.1-auth-ui-polish/18.1-01-SUMMARY.md

**Design References:**
@.planning/phases/17-design-system/design3
@.planning/phases/17-design-system/design4
@.planning/phases/17-design-system/design5
@v2/docs/DESIGN_SYSTEM.md

**Current Auth Files:**
@v2/src/app/(auth)/login/page.tsx
@v2/src/app/(auth)/signup/page.tsx
@v2/src/app/(auth)/reset-password/page.tsx

**Prior context:**
- 18.1-01 completed: Auth layout has header/footer, forms have brutalist styling
- Design system has skeleton components available
- Loading states need to match neobrutalist aesthetic
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create reusable loading components and apply to auth pages</name>
  <files>
    v2/src/components/ui/spinner.tsx,
    v2/src/components/ui/loading-button.tsx,
    v2/src/app/(auth)/login/page.tsx,
    v2/src/app/(auth)/signup/page.tsx,
    v2/src/app/(auth)/reset-password/page.tsx
  </files>
  <exploration>
    Check if spinner.tsx or similar loading component exists.
    Review Button component for loading state patterns.
    Look at Skeleton component for inspiration on loading aesthetics.
  </exploration>
  <action>
    1. **Create Spinner component** (if not exists):
       ```tsx
       // v2/src/components/ui/spinner.tsx
       // Simple spinning loader that matches brutalist aesthetic
       // - Black/Forest Green color options
       // - Size variants (sm, default, lg)
       // - No rounded corners (brutalist)
       // - Could be a spinning square or angular design
       ```

    2. **Create or enhance LoadingButton** (optional wrapper):
       - If Button already handles loading, enhance its loading state
       - Show spinner + loading text
       - Disabled styling during loading
       - Maintain press-down active effect

    3. **Apply loading states to auth pages**:

       **Login page:**
       - "Sign In" button shows spinner + "Signing in..." when loading
       - "Sign in with Google" shows spinner + "Connecting..." when loading
       - Inputs disabled during submission

       **Signup page:**
       - Step 1: "Create Account" button with loading state
       - Step 2: "Verify Email" button with loading state
       - Google button with loading state

       **Reset password page:**
       - "Send Reset Code" button with loading state
       - "Reset Password" button with loading state

    4. **Button feedback states**:
       - Hover: Lift up 2px, increase shadow
       - Active/Click: Press down 2px, remove shadow
       - Loading: Slightly dimmed, cursor not-allowed
       - Disabled: Grayed out, no shadow

    5. **Error display enhancement**:
       - Toast notifications should match brutalist aesthetic (if customizable)
       - Inline errors on inputs: red border, red text, mono font
       - Form-level errors: alert box with red left border

    Keep components minimal and reusable.
    Do NOT over-engineer - simple abstractions only.
  </action>
  <verify>
    - npm run build succeeds
    - Spinner component renders correctly
    - Login form shows loading state when submitting
    - Signup form shows loading state on both steps
    - Reset password form shows loading states
    - Loading prevents double-submission
  </verify>
  <done>
    Loading components created and applied:
    - Spinner component (brutalist style)
    - Button loading states on all auth pages
    - Disabled/loading visual feedback
    - Error states styled consistently
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Storybook stories for auth-related components</name>
  <files>
    v2/src/stories/Spinner.stories.tsx,
    v2/src/stories/AuthForms.stories.tsx
  </files>
  <exploration>
    Check existing Storybook setup in v2/src/stories/.
    Review how other components are documented.
  </exploration>
  <action>
    1. **Spinner.stories.tsx**:
       - Default spinner
       - Size variants (sm, default, lg)
       - Color variants (if applicable)
       - Usage with button

    2. **AuthForms.stories.tsx** (optional - showcase patterns):
       - Login form in various states (default, loading, error)
       - Signup form steps
       - Reset password form steps
       - Document the loading/error patterns for reuse

    3. **Update existing component stories if needed**:
       - Button: Add loading state story
       - Input: Add error state story
       - Card: Show auth card styling

    Keep stories focused on demonstrating the component states.
    Use Storybook decorators for consistent background (grain, dots).
  </action>
  <verify>
    - npm run storybook starts without errors
    - Spinner stories render correctly
    - Auth form stories (if created) show various states
    - No console errors in Storybook
  </verify>
  <done>
    Storybook documentation complete:
    - Spinner component documented
    - Loading states demonstrated
    - Auth form patterns captured for reference
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete auth UI polish:
    - Header/footer chrome on all auth pages
    - Brutalist form styling (hard shadows, black borders)
    - Loading/feedback states on all buttons
    - Spinner component
    - Storybook documentation
  </what-built>
  <how-to-verify>
    1. Run: `cd v2 && npm run dev`
    2. Visit: http://localhost:3000/login
    3. Check visual appearance:
       - Header with "PERM TRACKER" branding visible
       - Footer with copyright visible
       - Form has hard shadows and black borders
       - Inputs have proper styling and focus states
    4. Test interaction:
       - Click "Sign In" with empty fields - check error styling
       - Enter credentials and click "Sign In" - check loading state
       - Hover over buttons - check lift effect
       - Click and hold button - check press-down effect
    5. Navigate to http://localhost:3000/signup
       - Verify same header/footer
       - Verify form styling matches login
       - Test loading states on form submission
    6. Navigate to http://localhost:3000/reset-password
       - Verify same header/footer
       - Verify form styling matches
    7. Mobile check (resize to 375px width):
       - Layout should remain usable
       - No horizontal scroll
    8. Run: `cd v2 && npm run storybook`
       - Check Spinner component story
       - Verify loading states are documented
  </how-to-verify>
  <resume-signal>
    Type "approved" if auth UI meets design expectations.
    Otherwise, describe specific issues to fix.
  </resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] Loading states work on all auth pages
- [ ] Storybook runs without errors
- [ ] Human verification approved
</verification>

<success_criteria>
- Spinner component created and usable
- All auth buttons show loading state during submission
- Visual feedback on hover/click/loading/disabled states
- Storybook documents new components
- Human approves visual appearance of auth pages
</success_criteria>

<output>
After completion, create `.planning/phases/18.1-auth-ui-polish/18.1-02-SUMMARY.md`:

# Phase 18.1 Plan 02: Loading States & Verification Summary

**[One-liner describing what shipped]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `path/to/file.tsx` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Human Verification

- Status: [Approved/Requested Changes]
- Feedback: [Summary of feedback]

## Next Step

Phase 18.1 complete. Ready for Phase 19: Schema + Security.
</output>
