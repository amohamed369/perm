---
phase: 25.2-home-demo-page-polish
plan: 01
type: execute
---

<objective>
Set up infrastructure and build production-quality hero section with optimized isometric showcase image.

Purpose: Establish the foundation for public pages and create a memorable first impression.
Output: Working home page route with hero section, image optimization pipeline, scroll animation utilities.
</objective>

<CASCADING_CONTEXT>
## Instructions for All Agents, Plans, and Execution

### Core Philosophy
- **DRY, KISS** — No duplication, minimal complexity
- **Performance first** — Fast loading is critical, animations must be lightweight
- **Work within existing patterns** — Use v2 design system as-is, no new tokens
- **Explore first** — Fully understand before implementing
- **No clashing implementations** — Seamless integration with existing code

### Required Reading (MUST read before any implementation)
1. `.planning/FRONTEND_DESIGN_SKILL.md` — Frontend design patterns
2. `.planning/phases/17-design-system/design*` — Design docs 1-4
3. `perm_flow.md` — Case statuses, progress statuses, stage transitions
4. `v2/src/app/globals.css` — Existing animations and utilities
5. `v2/src/components/ui/` — Existing component patterns

### Implementation Rules
1. Use existing CSS animation utilities from globals.css
2. No new colors, shadows, or typography tokens
3. No new border-radius (system is square-corners only)
4. Keep code clean, organized, maintainable, readable
5. Ensure no clashing or duplicate implementations
6. Make fixes global — don't repeat patterns
7. Refactor as needed to fit fixes or improve maintainability
8. Abstract-able, scalable, DRY throughout

### Performance Requirements
- Animations must be CSS-based where possible (not JS-driven)
- Lazy load heavy components
- Optimize images (use next/image)
- Reduce motion on mobile for battery/performance
- Code split aggressively
- No blocking renders

### Quality Standards
- All features from v1 must be preserved
- Mobile responsive on all pages
- Dark mode support
- Touch-optimized on mobile
- Accessibility (ARIA labels, keyboard nav)

### Hero Image Requirement
- **MUST USE:** `v2/public/images/hero-showcase.png` (isometric UI showcase)
- Optimize to WebP with responsive sizes (lg/md/sm)
- Use next/image with priority loading
- Target < 200KB per optimized version
</CASCADING_CONTEXT>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/FRONTEND_DESIGN_SKILL.md
@.planning/phases/25.2-home-demo-page-polish/25.2-CONTEXT.md
@.planning/phases/25.2-home-demo-page-polish/25.2-RESEARCH.md
@v2/src/app/globals.css
@v2/src/components/layout/AuthHeader.tsx
@v2/src/components/layout/Footer.tsx
@v2/src/app/page.tsx

**Prior decisions affecting this phase:**
- Phase 17: Neobrutalist design system with Space Grotesk + Inter typography
- Phase 17.1: Hard shadows, square corners, lime green primary (#2ECC40)
- Phase 18.1: AuthHeader is production-ready for public pages
- Phase 23: Framer Motion patterns established for scroll animations

**Codebase constraints:**
- Use existing AuthHeader component (no modifications needed)
- Use existing CSS animations from globals.css
- Hero image at root: `hero_image.png` - needs to be moved and optimized
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create image optimization pipeline and move hero image</name>
  <files>v2/public/images/hero-showcase.webp, v2/public/images/hero-showcase-lg.webp, v2/public/images/hero-showcase-md.webp, v2/public/images/hero-showcase-sm.webp</files>
  <exploration>
    Check if sharp is available for image optimization (common with Next.js).
    Look at v1's hero-dashboard.webp for size reference.
    Understand the next/image requirements for responsive images.
  </exploration>
  <action>
    1. Create v2/public/images/ directory if not exists
    2. Copy hero_image.png from root to v2/public/images/hero-showcase.png
    3. Use sharp (or next/image auto-optimization) to create WebP versions:
       - hero-showcase-lg.webp (1920px width, desktop)
       - hero-showcase-md.webp (1280px width, tablet)
       - hero-showcase-sm.webp (768px width, mobile)
    4. Target < 200KB per optimized version
    5. Keep original PNG as fallback

    Note: If sharp is not available via CLI, Next.js will auto-optimize via next/image - we can just use the original and let next/image handle responsive sizing.
  </action>
  <verify>ls -la v2/public/images/ shows hero images, file sizes are reasonable</verify>
  <done>Hero images in place, ready for next/image component</done>
</task>

<task type="auto">
  <name>Task 2: Create scroll animation utilities with Framer Motion</name>
  <files>v2/src/components/ui/scroll-reveal.tsx, v2/src/lib/animations.ts</files>
  <exploration>
    Use Explore agent to find existing Framer Motion usage patterns in the codebase.
    Check v2/src/components/cases/form/ for AnimatePresence patterns.
    Review globals.css for existing animation classes to build upon.
  </exploration>
  <action>
    Create reusable scroll animation components following CONTEXT.md requirements:

    1. v2/src/lib/animations.ts - Animation variants and utilities:
       - fadeInUp, fadeInDown, fadeInLeft, fadeInRight
       - staggerContainer (for cascading children)
       - parallaxY (for parallax effects)
       - useReducedMotion hook for accessibility

    2. v2/src/components/ui/scroll-reveal.tsx - ScrollReveal component:
       - Props: direction, delay, stagger, threshold (viewport %)
       - Uses framer-motion's useInView hook
       - Supports reveal at 10-20% (early), 40-50% (center)
       - CSS fallback for prefers-reduced-motion
       - Works with existing Card, Button components

    3. Add motion-reduce utility to globals.css if not present:
       @media (prefers-reduced-motion: reduce) {
         *, *::before, *::after {
           animation-duration: 0.01ms !important;
           transition-duration: 0.01ms !important;
         }
       }

    Follow existing patterns from RFIEntryList.tsx, RecruitmentSection.tsx.
  </action>
  <verify>pnpm build succeeds, no TypeScript errors</verify>
  <done>ScrollReveal component and animation utilities ready for use in home page sections</done>
</task>

<task type="auto">
  <name>Task 3: Build hero section with isometric showcase image</name>
  <files>v2/src/components/home/HeroSection.tsx, v2/src/app/(public)/page.tsx, v2/src/app/(public)/layout.tsx</files>
  <exploration>
    Read .planning/FRONTEND_DESIGN_SKILL.md for design patterns.
    Check AuthHeader.tsx for layout integration patterns.
    Look at design1-5 files in .planning/phases/17-design-system/ for inspiration.
  </exploration>
  <action>
    1. Create (public) route group: v2/src/app/(public)/layout.tsx
       - Uses AuthHeader (already has public page support)
       - Uses Footer (may need variant prop for extended footer)
       - No auth required (public pages)

    2. Convert v2/src/app/page.tsx from redirect to proper home page:
       - Move redirect logic to middleware or remove entirely
       - Import HeroSection
       - SSG-friendly (no client-only hooks at top level)

    3. Create HeroSection.tsx with Linear-style treatment:
       - Large headline: "Track PERM Cases with Confidence"
       - Subheadline: Compelling value proposition (fresh copy per CONTEXT.md)
       - Two CTAs: "Start Free" (primary, links to /register), "Try Demo" (secondary, links to /demo)
       - Hero image using next/image with priority loading
       - Subtle float animation on image OR parallax on scroll (keep lightweight)
       - Uses existing Button component variants
       - Dark mode support via CSS variables
       - Mobile responsive (image below text on mobile)

    4. Styling approach:
       - Use existing design tokens (--primary, --shadow-hard, etc.)
       - Grain overlay from existing .grain-overlay class
       - Background dot pattern using existing .bg-dots if available
       - Space Grotesk for headline, Inter for body

    5. Animation:
       - Hero content fades in on load (animate-fade-in)
       - Image has subtle animation (float or parallax, lightweight)
       - Snappy, not slow/floaty
  </action>
  <verify>Navigate to localhost:3000, hero section renders with image, CTAs work, dark mode works</verify>
  <done>Hero section complete with optimized image, animations, and responsive layout</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Home page hero section with isometric showcase image, scroll animation utilities, and (public) route group</what-built>
  <how-to-verify>
    1. Run: npx convex dev (if not running) && pnpm dev
    2. Visit: http://localhost:3000
    3. Verify hero section:
       - Large headline and subheadline visible
       - Hero image loads quickly and looks sharp
       - "Start Free" and "Try Demo" buttons visible and clickable
       - Animation feels snappy, not slow
    4. Test dark mode: Toggle theme and verify colors adapt
    5. Test mobile: Resize browser to mobile width
       - Image should stack below text
       - Text should remain readable
       - Buttons should be full-width or appropriately sized
    6. Test reduced motion: Enable "Reduce motion" in OS settings
       - Animations should be minimal or disabled
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Hero images optimized and in v2/public/images/
- [ ] ScrollReveal component created and exported
- [ ] Animation utilities in v2/src/lib/animations.ts
- [ ] (public) route group layout created
- [ ] Home page renders at /
- [ ] Hero section with image, headline, CTAs
- [ ] Dark mode works
- [ ] Mobile responsive
- [ ] pnpm build succeeds
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Hero image loads in < 2 seconds (LCP target)
- Animation feels snappy, Linear-style
- No TypeScript errors
- Human checkpoint approved
</success_criteria>

<output>
After completion, create `.planning/phases/25.2-home-demo-page-polish/25.2-01-SUMMARY.md`:

# Phase 25.2 Plan 01: Infrastructure & Hero Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `path/to/file.ts` - Description
- `path/to/another.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 25.2-02-PLAN.md (Home Page Sections)
</output>
