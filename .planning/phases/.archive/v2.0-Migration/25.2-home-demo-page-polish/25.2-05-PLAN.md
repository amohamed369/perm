---
phase: 25.2-home-demo-page-polish
plan: 05
type: execute
---

<objective>
Build demo page CRUD functionality: case cards grid, add/edit modal, delete confirmation, and CTA section.

Purpose: Allow users to experience the full case management workflow in demo mode.
Output: Interactive demo with create, edit, delete operations + conversion CTA.
</objective>

<CASCADING_CONTEXT>
## Instructions for All Agents, Plans, and Execution

### Core Philosophy
- **DRY, KISS** — No duplication, minimal complexity
- **Performance first** — Fast loading is critical, animations must be lightweight
- **Work within existing patterns** — Use v2 design system as-is, no new tokens
- **Explore first** — Fully understand before implementing
- **No clashing implementations** — Seamless integration with existing code

### Required Reading (MUST read before any implementation)
1. `.planning/FRONTEND_DESIGN_SKILL.md` — Frontend design patterns
2. `.planning/phases/17-design-system/design*` — Design docs 1-4
3. `perm_flow.md` — Case statuses, progress statuses, stage transitions
4. `v2/src/app/globals.css` — Existing animations and utilities
5. `v2/src/components/ui/` — Existing component patterns

### Implementation Rules
1. Use existing CSS animation utilities from globals.css
2. No new colors, shadows, or typography tokens
3. No new border-radius (system is square-corners only)
4. Keep code clean, organized, maintainable, readable
5. Ensure no clashing or duplicate implementations
6. Make fixes global — don't repeat patterns
7. Refactor as needed to fit fixes or improve maintainability
8. Abstract-able, scalable, DRY throughout

### Performance Requirements
- Animations must be CSS-based where possible (not JS-driven)
- Lazy load heavy components
- Optimize images (use next/image)
- Reduce motion on mobile for battery/performance
- Code split aggressively
- No blocking renders

### Quality Standards
- All features from v1 must be preserved
- Mobile responsive on all pages
- Dark mode support
- Touch-optimized on mobile
- Accessibility (ARIA labels, keyboard nav)
</CASCADING_CONTEXT>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/FRONTEND_DESIGN_SKILL.md
@.planning/phases/25.2-home-demo-page-polish/25.2-CONTEXT.md
@.planning/phases/25.2-home-demo-page-polish/25.2-04-SUMMARY.md
@v2/src/components/cases/CaseCard.tsx

**Prior context:**
- 25.2-04: Demo page core with localStorage, stats, calendar, timeline

**V1 demo features to preserve:**
- Case cards grid with CRUD
- Add/Edit modal with all PERM fields
- Delete confirmation modal
- AI commands section (toned down, integrated)
- CTA section (conversion)
- Reset demo functionality
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build demo case cards grid with simplified CaseCard</name>
  <files>v2/src/components/demo/DemoCaseCard.tsx, v2/src/components/demo/DemoCasesGrid.tsx</files>
  <exploration>
    Review existing CaseCard.tsx from v2/src/components/cases/.
    Check v1 demo.html for demo case card styling.
    Understand which fields are essential for demo display.
  </exploration>
  <action>
    1. Create DemoCaseCard.tsx:
       - Simplified version of CaseCard for demo
       - Props: case: DemoCase, onEdit: () => void, onDelete: () => void
       - Display:
         - Beneficiary name (large, bold)
         - Employer name (smaller)
         - Status badge (use Badge component with stage color)
         - Progress status badge
         - Next deadline (if any) with days remaining
         - Edit and Delete action buttons
       - Use Card component with .card-snappy hover
       - Stage color accent (left border or header background)
       - Compact layout for grid display

    2. Create DemoCasesGrid.tsx:
       - Props: cases: DemoCase[], onEdit: (id: string) => void, onDelete: (id: string) => void, onAdd: () => void
       - Grid layout: 3 columns on desktop, 2 on tablet, 1 on mobile
       - "Add Case" button at top (opens add modal)
       - Map cases to DemoCaseCard components
       - Empty state if no cases: "No cases yet - add one!"
       - AnimatePresence for enter/exit animations

    3. Update demo/page.tsx:
       - Add DemoCasesGrid section
       - Wire up onEdit, onDelete, onAdd handlers
       - State for selected case (for edit modal)
       - State for modal visibility
  </action>
  <verify>Demo page shows case cards in grid, buttons are clickable</verify>
  <done>Case cards grid with edit/delete buttons, add case button</done>
</task>

<task type="auto">
  <name>Task 2: Build add/edit case modal with PERM fields</name>
  <files>v2/src/components/demo/DemoCaseModal.tsx</files>
  <exploration>
    Review existing form patterns from v2/src/components/cases/form/.
    Check Dialog component usage.
    Look at applyCascade for auto-calculations.
  </exploration>
  <action>
    Create DemoCaseModal.tsx:

    Props:
    - isOpen: boolean
    - onClose: () => void
    - caseToEdit?: DemoCase (undefined = add mode)
    - onSave: (case: DemoCase) => void

    Form fields (simplified subset for demo):
    - Beneficiary Name (required)
    - Employer Name (required)
    - Case Status (select: pwd, recruitment, eta_9089, i140, complete)
    - Progress Status (select based on status)
    - Is Professional Occupation (checkbox)

    PWD Section:
    - PWD Filing Date
    - PWD Determination Date
    - PWD Expiration Date (auto-calculated, readonly)

    Recruitment Section (if applicable):
    - Notice of Filing dates
    - Job Order dates
    - Sunday Ads dates

    ETA 9089 Section (if applicable):
    - Filing Date
    - Certification Date
    - Expiration Date (auto-calculated)

    I-140 Section (if applicable):
    - Filing Date
    - Approval Date

    Implementation:
    - Use Dialog component from shadcn/ui
    - Use Input, Select, Checkbox components
    - Organize in collapsible sections (or tabs)
    - Apply cascade logic when dates change (import from @/lib/perm)
    - Client-side validation
    - Save button: primary, Cancel button: secondary
    - Loading state on save

    Note: This is a simplified version - not all 40+ fields. Enough to demonstrate the workflow.
  </action>
  <verify>Modal opens, form submits, case is created/updated in localStorage</verify>
  <done>Add/edit modal with PERM fields and auto-calculations</done>
</task>

<task type="auto">
  <name>Task 3: Build delete confirmation, CTA section, and wire up demo</name>
  <files>v2/src/components/demo/DeleteConfirmDialog.tsx, v2/src/components/demo/DemoCTA.tsx, v2/src/app/(public)/demo/page.tsx</files>
  <exploration>
    Check existing Dialog patterns.
    Review v1 demo.html for CTA section design.
    Look at AI commands section in v1.
  </exploration>
  <action>
    1. Create DeleteConfirmDialog.tsx:
       - Props: isOpen, onClose, caseName: string, onConfirm: () => void
       - Dialog with warning message
       - "Are you sure you want to delete [case name]?"
       - Cancel button (secondary) and Delete button (destructive)
       - Destructive button uses red color

    2. Create DemoCTA.tsx:
       - Conversion call-to-action section
       - Headline: "Ready to track your real cases?"
       - Subtext: Brief value proposition
       - Two buttons:
         - "Start Free" → /register (primary)
         - "Learn More" → scroll to home page features (secondary)
       - Background: Subtle gradient or accent color
       - Hard shadow styling
       - Integrate AI mention naturally:
         - "AI-powered assistance included" (not a separate section)

    3. Update demo/page.tsx completely:
       - Full page layout with all sections:
         1. DemoBanner (from 25.2-04)
         2. StatsGrid (from 25.2-04)
         3. Preview grid: MiniCalendar + MiniTimeline (from 25.2-04)
         4. DemoCasesGrid with cards
         5. DemoCTA section
         6. Reset button: "Reset Demo" → resetDemoCases()
       - Modal state management:
         - isModalOpen, caseToEdit, isDeleteOpen, caseToDelete
       - Wire all handlers:
         - handleAdd → open modal (no case)
         - handleEdit(id) → open modal with case
         - handleSave(case) → addDemoCase or updateDemoCase
         - handleDelete(id) → open delete confirm
         - confirmDelete → deleteDemoCase
         - handleReset → resetDemoCases

    4. Add AI commands teaser (toned down per CONTEXT.md):
       - Small section showing example AI commands
       - "Try asking: 'Add a new case for Acme Corp'"
       - "Or: 'What deadlines are coming up?'"
       - Not a prominent section - integrate naturally below CTA
  </action>
  <verify>Full CRUD flow works: add, edit, delete cases. CTA buttons link correctly.</verify>
  <done>Complete demo page with CRUD, CTA, and AI teaser</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete interactive demo page with case CRUD, modals, and conversion CTA</what-built>
  <how-to-verify>
    1. Run: pnpm dev
    2. Visit: http://localhost:3000/demo
    3. Verify demo page layout:
       - Demo banner at top (gradient, fixed)
       - Stats grid showing case counts
       - Mini calendar with event dots
       - Mini timeline with progress bars
       - Case cards grid with 5 default cases
       - CTA section at bottom
    4. Test Add Case:
       - Click "Add Case" button
       - Modal opens with form
       - Fill in required fields
       - Save → new case appears in grid
    5. Test Edit Case:
       - Click Edit on any case card
       - Modal opens with case data
       - Change a field
       - Save → case updates in grid
    6. Test Delete Case:
       - Click Delete on any case card
       - Confirmation dialog appears
       - Confirm → case removed from grid
       - Stats update automatically
    7. Test Reset:
       - Click "Reset Demo" button
       - All cases restored to 5 defaults
    8. Test persistence:
       - Make changes, refresh page
       - Changes persist (localStorage)
    9. Test dark mode and mobile
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] DemoCaseCard component with edit/delete actions
- [ ] DemoCasesGrid with add button
- [ ] DemoCaseModal with PERM fields and auto-calculations
- [ ] DeleteConfirmDialog component
- [ ] DemoCTA section with conversion buttons
- [ ] AI commands teaser integrated
- [ ] Full CRUD flow working
- [ ] localStorage persistence verified
- [ ] Dark mode works
- [ ] Mobile responsive
- [ ] pnpm build succeeds
- [ ] Human checkpoint approved
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Demo provides complete case management experience
- No TypeScript errors
- Conversion funnel clear (demo → signup)
- Human checkpoint approved
</success_criteria>

<output>
After completion, create `.planning/phases/25.2-home-demo-page-polish/25.2-05-SUMMARY.md`:

# Phase 25.2 Plan 05: Demo Page CRUD Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]
- [Key outcome 3]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 25.2-06-PLAN.md (Polish & Performance)
</output>
