---
phase: 25.2-home-demo-page-polish
plan: 06
type: execute
---

<objective>
Polish and performance optimization: scroll animations choreography, motion reduction, animation storyboard documentation, and final QA.

Purpose: Ensure premium experience with optimal performance across all devices.
Output: Production-ready public pages with documented animation system.
</objective>

<CASCADING_CONTEXT>
## Instructions for All Agents, Plans, and Execution

### Core Philosophy
- **DRY, KISS** — No duplication, minimal complexity
- **Performance first** — Fast loading is critical, animations must be lightweight
- **Work within existing patterns** — Use v2 design system as-is, no new tokens
- **Explore first** — Fully understand before implementing
- **No clashing implementations** — Seamless integration with existing code

### Required Reading (MUST read before any implementation)
1. `.planning/FRONTEND_DESIGN_SKILL.md` — Frontend design patterns
2. `.planning/phases/17-design-system/design*` — Design docs 1-4
3. `perm_flow.md` — Case statuses, progress statuses, stage transitions
4. `v2/src/app/globals.css` — Existing animations and utilities
5. `v2/src/components/ui/` — Existing component patterns

### Implementation Rules
1. Use existing CSS animation utilities from globals.css
2. No new colors, shadows, or typography tokens
3. No new border-radius (system is square-corners only)
4. Keep code clean, organized, maintainable, readable
5. Ensure no clashing or duplicate implementations
6. Make fixes global — don't repeat patterns
7. Refactor as needed to fit fixes or improve maintainability
8. Abstract-able, scalable, DRY throughout

### Performance Requirements
- Animations must be CSS-based where possible (not JS-driven)
- Lazy load heavy components
- Optimize images (use next/image)
- Reduce motion on mobile for battery/performance
- Code split aggressively
- No blocking renders

### Quality Standards
- All features from v1 must be preserved
- Mobile responsive on all pages
- Dark mode support
- Touch-optimized on mobile
- Accessibility (ARIA labels, keyboard nav)
</CASCADING_CONTEXT>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/FRONTEND_DESIGN_SKILL.md
@.planning/phases/25.2-home-demo-page-polish/25.2-CONTEXT.md
@.planning/phases/25.2-home-demo-page-polish/25.2-05-SUMMARY.md

**Prior context:**
- 25.2-01 to 25.2-05: Home page and demo page complete
- All sections built with scroll animations
- Framer Motion and CSS animations in use

**Polish requirements from CONTEXT.md:**
- Scroll animation choreography (reveal early, center, stagger, parallax)
- Micro-interactions (snappy, no pulse)
- Magnetic cursor effects (optional, Stripe-like)
- Motion reduction on mobile
- Animation storyboard documentation
</context>

<tasks>

<task type="auto">
  <name>Task 1: Finalize scroll animation choreography and parallax</name>
  <files>v2/src/lib/animations.ts, v2/src/components/ui/scroll-reveal.tsx, v2/src/components/home/DecorativeElements.tsx</files>
  <exploration>
    Review all home page sections for animation consistency.
    Check Framer Motion scroll-linked animation patterns.
    Test current animations on different scroll speeds.
  </exploration>
  <action>
    1. Refine animations.ts variants:
       - Ensure consistent timing: 0.3-0.5s duration (snappy)
       - Easing: ease-out for reveals, spring for interactions
       - Stagger delays: 0.1s between children (not slower)
       - No slow/floaty animations (per CONTEXT.md)

    2. Update scroll-reveal.tsx thresholds:
       - Early reveal (10-20%): Hero, first visible sections
       - Center reveal (40-50%): Feature details, important content
       - Ensure animations trigger reliably (not too late)
       - Add once: true to prevent re-triggering on scroll up

    3. Enhance parallax in DecorativeElements.tsx:
       - Multiple speed layers (0.2x, 0.4x, 0.6x)
       - Throttle scroll handler (16ms = 60fps max)
       - Use CSS will-change: transform for GPU acceleration
       - Limit parallax range to prevent over-scrolling elements

    4. Add page-level entrance animation:
       - First-paint animation for hero (immediate)
       - Stagger children as user scrolls
       - Use AnimatePresence for route transitions (optional)

    5. Verify snappy feel throughout:
       - No animations > 0.5s duration
       - No delays > 0.2s except stagger sequences
       - Hover responses < 0.15s
  </action>
  <verify>Scroll through home page, animations feel snappy and well-timed</verify>
  <done>Animation choreography polished with consistent snappy timing</done>
</task>

<task type="auto">
  <name>Task 2: Implement motion reduction and mobile optimizations</name>
  <files>v2/src/lib/animations.ts, v2/src/app/globals.css, v2/src/components/ui/scroll-reveal.tsx</files>
  <exploration>
    Check current prefers-reduced-motion handling.
    Test on mobile Safari and Chrome for performance.
    Review battery/performance impact of animations.
  </exploration>
  <action>
    1. Add useReducedMotion hook to animations.ts:
       ```typescript
       export function useReducedMotion(): boolean {
         const [reduced, setReduced] = useState(false);
         useEffect(() => {
           const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
           setReduced(mq.matches);
           const handler = (e: MediaQueryListEvent) => setReduced(e.matches);
           mq.addEventListener('change', handler);
           return () => mq.removeEventListener('change', handler);
         }, []);
         return reduced;
       }
       ```

    2. Update ScrollReveal to respect reduced motion:
       - If reduced motion: instant reveal (no animation)
       - Or simple fade (opacity only, no transforms)

    3. Add mobile detection for lighter animations:
       - Detect mobile via matchMedia('(max-width: 768px)')
       - On mobile: disable parallax entirely (static position)
       - On mobile: reduce stagger delays (faster sequences)
       - On mobile: simpler hover effects (no 3D transforms)

    4. Update globals.css with motion-reduce media query:
       ```css
       @media (prefers-reduced-motion: reduce) {
         *, *::before, *::after {
           animation-duration: 0.01ms !important;
           animation-iteration-count: 1 !important;
           transition-duration: 0.01ms !important;
         }
       }
       ```

    5. Test performance:
       - Ensure 60fps on scroll (no jank)
       - No layout thrashing from animations
       - Lazy load below-fold content
  </action>
  <verify>Toggle reduced motion in OS settings, verify animations adapt. Test on mobile.</verify>
  <done>Motion reduction and mobile optimizations complete</done>
</task>

<task type="auto">
  <name>Task 3: Create animation storyboard documentation</name>
  <files>v2/docs/ANIMATION_STORYBOARD.md</files>
  <exploration>
    Review all animation implementations across home and demo pages.
    Catalog animation types, durations, and triggers.
  </exploration>
  <action>
    Create v2/docs/ANIMATION_STORYBOARD.md documenting all animations:

    # Animation Storyboard

    ## Design Principles
    - Snappy & reactive first (Linear.app style)
    - Performance over polish
    - Accessibility via reduced motion
    - Consistent timing across pages

    ## Animation Types

    ### Scroll Reveals
    | Section | Trigger | Animation | Duration | Stagger |
    |---------|---------|-----------|----------|---------|
    | Hero | Immediate | fadeInUp | 0.4s | - |
    | Features | 20% viewport | fadeInUp | 0.3s | 0.1s |
    | How It Works | 40% viewport | fadeInUp | 0.3s | 0.15s |
    | Showcase | 30% viewport | fadeInUp | 0.3s | 0.1s |
    | FAQ | 40% viewport | fadeIn | 0.3s | - |
    | Contact | 30% viewport | fadeInUp | 0.3s | - |

    ### Micro-interactions
    | Element | Trigger | Animation | Duration |
    |---------|---------|-----------|----------|
    | Card | Hover | lift + shadow | 0.15s |
    | Button | Hover | scale(1.02) | 0.1s |
    | Button | Active | translateY(2px) | 0.05s |
    | Link | Hover | underline | 0.15s |
    | FAQ item | Click | height expand | 0.3s |

    ### Parallax
    | Element | Speed | Range | Mobile |
    |---------|-------|-------|--------|
    | Floating shapes | 0.2-0.6x | ±100px | Disabled |
    | Hero image | 0.3x | ±50px | Disabled |

    ### Page Transitions
    - Route change: fadeIn 0.2s
    - Modal open: fadeIn + scale 0.2s
    - Modal close: fadeOut 0.15s

    ## Mobile Behavior
    - Parallax: Disabled (static)
    - Stagger delays: Halved
    - Hover effects: Touch-optimized

    ## Accessibility
    - prefers-reduced-motion: Instant reveals, no transforms
    - Focus states: Ring outline (3px)
    - Keyboard nav: Tab order preserved

    ## Performance Notes
    - All transforms use GPU (translate3d, scale)
    - will-change applied sparingly
    - Throttled scroll handlers (16ms)
    - No layout-triggering animations
  </action>
  <verify>Documentation file exists with complete animation catalog</verify>
  <done>Animation storyboard documented for future reference</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Polished scroll animations, motion reduction, mobile optimizations, and animation documentation</what-built>
  <how-to-verify>
    1. Run: pnpm dev
    2. Visit: http://localhost:3000

    **Animation Quality Check:**
    3. Scroll slowly through home page:
       - Hero appears immediately, snappy
       - Features cards stagger in (not slow)
       - How It Works steps cascade
       - Showcase items reveal one-by-one
       - All animations feel "Linear.app" snappy, not floaty
    4. Scroll quickly:
       - Animations still trigger properly
       - No jank or stuttering (60fps)

    **Parallax Check:**
    5. Scroll and observe floating shapes:
       - They move at different speeds
       - Movement is subtle, not distracting

    **Reduced Motion Check:**
    6. Enable "Reduce Motion" in OS accessibility settings
    7. Reload and scroll:
       - Content appears instantly or fades simply
       - No dramatic transforms or parallax

    **Mobile Check:**
    8. Open DevTools, toggle device toolbar (mobile)
    9. Scroll through page:
       - No parallax (shapes static)
       - Animations simpler but still present
       - Touch targets large enough

    **Demo Page:**
    10. Visit /demo and verify similar polish

    **Documentation:**
    11. Check v2/docs/ANIMATION_STORYBOARD.md exists

    **Performance:**
    12. Open DevTools Performance tab, record scroll
       - Frame rate should stay near 60fps
       - No long tasks during scroll
  </how-to-verify>
  <resume-signal>Type "approved" to continue to final QA, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Scroll animations polished (snappy, consistent)
- [ ] Parallax refined with multiple speed layers
- [ ] useReducedMotion hook working
- [ ] Mobile optimizations applied
- [ ] globals.css has motion-reduce media query
- [ ] ANIMATION_STORYBOARD.md created
- [ ] Performance tested (60fps scroll)
- [ ] Human checkpoint approved
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Animations feel premium and snappy
- Accessible with reduced motion
- Mobile performance optimized
- Documentation complete
- Human checkpoint approved
</success_criteria>

<output>
After completion, create `.planning/phases/25.2-home-demo-page-polish/25.2-06-SUMMARY.md`:

# Phase 25.2 Plan 06: Polish & Performance Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]
- [Key outcome 3]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Phase 25.2 Complete

Home page and demo page are production-ready. Ready for Phase 26: Chat Foundation.
</output>
