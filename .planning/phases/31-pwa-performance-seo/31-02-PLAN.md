---
phase: 31-pwa-performance-seo
plan: 02
type: execute
---

<objective>
Implement comprehensive SEO with robots.txt, sitemap, enhanced metadata, and page-level SEO.

Purpose: Make the app discoverable by search engines for immigration attorneys searching for PERM tracking tools.
Output: Complete SEO infrastructure with robots.ts, sitemap.ts, OpenGraph/Twitter cards, and page-level metadata.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/31-pwa-performance-seo/31-RESEARCH.md
@.planning/phases/31-pwa-performance-seo/31-CONTEXT.md
@.planning/phases/31-pwa-performance-seo/31-01-SUMMARY.md

**Prior decisions affecting this phase:**
- Authenticated pages should NOT be indexed (user data)
- Public pages (home, demo, login) should be indexed
- Target audience: immigration attorneys searching for PERM tracking

**Codebase constraints:**
- Next.js 16.1.0 App Router
- Use built-in robots.ts, sitemap.ts (not external libs)
- Use generateMetadata for dynamic pages
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create robots.ts and sitemap.ts</name>
  <files>v2/src/app/robots.ts, v2/src/app/sitemap.ts</files>
  <action>
    1. Create `src/app/robots.ts`:
       ```typescript
       import type { MetadataRoute } from 'next'

       export default function robots(): MetadataRoute.Robots {
         const baseUrl = process.env.NEXT_PUBLIC_APP_URL || 'https://permtracker.app'

         return {
           rules: [
             {
               userAgent: '*',
               allow: '/',
               disallow: [
                 '/api/',        // API routes
                 '/dashboard/',  // Authenticated
                 '/cases/',      // Authenticated
                 '/calendar/',   // Authenticated
                 '/timeline/',   // Authenticated
                 '/notifications/', // Authenticated
                 '/settings/',   // Authenticated
               ],
             },
           ],
           sitemap: `${baseUrl}/sitemap.xml`,
         }
       }
       ```

    2. Create `src/app/sitemap.ts`:
       ```typescript
       import type { MetadataRoute } from 'next'

       export default function sitemap(): MetadataRoute.Sitemap {
         const baseUrl = process.env.NEXT_PUBLIC_APP_URL || 'https://permtracker.app'

         return [
           {
             url: baseUrl,
             lastModified: new Date(),
             changeFrequency: 'weekly',
             priority: 1,
           },
           {
             url: `${baseUrl}/demo`,
             lastModified: new Date(),
             changeFrequency: 'monthly',
             priority: 0.8,
           },
           {
             url: `${baseUrl}/login`,
             lastModified: new Date(),
             changeFrequency: 'yearly',
             priority: 0.5,
           },
           {
             url: `${baseUrl}/signup`,
             lastModified: new Date(),
             changeFrequency: 'yearly',
             priority: 0.5,
           },
           {
             url: `${baseUrl}/terms`,
             lastModified: new Date(),
             changeFrequency: 'yearly',
             priority: 0.3,
           },
           {
             url: `${baseUrl}/privacy`,
             lastModified: new Date(),
             changeFrequency: 'yearly',
             priority: 0.3,
           },
         ]
       }
       ```
  </action>
  <verify>
    curl http://localhost:3000/robots.txt shows proper robot rules
    curl http://localhost:3000/sitemap.xml shows valid XML sitemap
  </verify>
  <done>robots.ts and sitemap.ts created, both accessible at standard URLs</done>
</task>

<task type="auto">
  <name>Task 2: Enhance root layout metadata with OpenGraph and Twitter cards</name>
  <files>v2/src/app/layout.tsx, v2/public/og-image.jpg</files>
  <exploration>
    Use Explore agent to check current metadata in layout.tsx.
    Find or create an OpenGraph image for social sharing (1200x630).
  </exploration>
  <action>
    1. Create OpenGraph image (`public/og-image.jpg` or .png):
       - Size: 1200x630 pixels
       - Content: PERM Tracker branding with lime green accent
       - Include tagline: "Free PERM Case Tracking for Immigration Attorneys"

    2. Update `src/app/layout.tsx` metadata to include:
       ```typescript
       import type { Metadata } from 'next'

       export const metadata: Metadata = {
         metadataBase: new URL(process.env.NEXT_PUBLIC_APP_URL || 'https://permtracker.app'),
         title: {
           default: 'PERM Tracker - Free Case Tracking for Immigration Attorneys',
           template: '%s | PERM Tracker',
         },
         description: 'Free PERM case tracking software for immigration attorneys. Track deadlines, manage labor certification cases, and never miss a filing date.',
         keywords: [
           'PERM',
           'immigration',
           'case tracking',
           'labor certification',
           'DOL',
           'immigration attorney',
           'PERM tracker',
           'deadline management',
           'ETA 9089',
           'I-140',
         ],
         authors: [{ name: 'PERM Tracker' }],
         creator: 'PERM Tracker',
         publisher: 'PERM Tracker',
         formatDetection: {
           email: false,
           address: false,
           telephone: false,
         },
         openGraph: {
           type: 'website',
           locale: 'en_US',
           url: '/',
           siteName: 'PERM Tracker',
           title: 'PERM Tracker - Free Case Tracking for Immigration Attorneys',
           description: 'Free PERM case tracking software. Track deadlines, manage cases, never miss a filing date.',
           images: [
             {
               url: '/og-image.jpg',
               width: 1200,
               height: 630,
               alt: 'PERM Tracker - Case Management for Immigration Attorneys',
             },
           ],
         },
         twitter: {
           card: 'summary_large_image',
           title: 'PERM Tracker - Free Case Tracking',
           description: 'Free PERM case tracking for immigration attorneys.',
           images: ['/og-image.jpg'],
         },
         robots: {
           index: true,
           follow: true,
           googleBot: {
             index: true,
             follow: true,
             'max-image-preview': 'large',
             'max-snippet': -1,
             'max-video-preview': -1,
           },
         },
         verification: {
           // Add Google Search Console verification if available
           // google: 'verification-token',
         },
       }
       ```
  </action>
  <verify>
    View page source shows OpenGraph and Twitter meta tags
    Social media debuggers (Facebook, Twitter) show correct preview
    og-image.jpg exists in public/
  </verify>
  <done>Root metadata enhanced with OpenGraph, Twitter cards, keywords, and social image</done>
</task>

<task type="auto">
  <name>Task 3: Add page-level metadata for all routes</name>
  <files>v2/src/app/(public)/page.tsx, v2/src/app/(public)/demo/page.tsx, v2/src/app/(auth)/login/page.tsx, v2/src/app/(auth)/signup/page.tsx, v2/src/app/(authenticated)/dashboard/page.tsx, v2/src/app/(authenticated)/cases/page.tsx, v2/src/app/(authenticated)/settings/page.tsx</files>
  <exploration>
    Use Explore agent to find all page.tsx files that need metadata.
    Check which pages are public vs authenticated.
  </exploration>
  <action>
    1. Add metadata to PUBLIC pages (indexable):

       **Home page (`(public)/page.tsx`):**
       ```typescript
       export const metadata: Metadata = {
         title: 'PERM Tracker - Free Case Tracking for Immigration Attorneys',
         description: 'Free PERM case tracking software. Manage labor certification deadlines, track case status, and streamline your immigration practice.',
       }
       ```

       **Demo page (`(public)/demo/page.tsx`):**
       ```typescript
       export const metadata: Metadata = {
         title: 'Try Demo',
         description: 'Try PERM Tracker for free. Explore all features with sample data before signing up.',
       }
       ```

       **Terms page (`(public)/terms/page.tsx`):**
       ```typescript
       export const metadata: Metadata = {
         title: 'Terms of Service',
         description: 'PERM Tracker terms of service and usage agreement.',
       }
       ```

       **Privacy page (`(public)/privacy/page.tsx`):**
       ```typescript
       export const metadata: Metadata = {
         title: 'Privacy Policy',
         description: 'PERM Tracker privacy policy and data handling practices.',
       }
       ```

    2. Add metadata to AUTH pages (indexable but low priority):

       **Login page (`(auth)/login/page.tsx`):**
       ```typescript
       export const metadata: Metadata = {
         title: 'Sign In',
         description: 'Sign in to your PERM Tracker account to manage your immigration cases.',
       }
       ```

       **Signup page (`(auth)/signup/page.tsx`):**
       ```typescript
       export const metadata: Metadata = {
         title: 'Create Account',
         description: 'Create a free PERM Tracker account to start managing your immigration cases.',
       }
       ```

    3. Add metadata to AUTHENTICATED pages (noindex):

       **Dashboard (`(authenticated)/dashboard/page.tsx`):**
       ```typescript
       export const metadata: Metadata = {
         title: 'Dashboard',
         robots: { index: false, follow: false },
       }
       ```

       **Cases list (`(authenticated)/cases/page.tsx`):**
       ```typescript
       export const metadata: Metadata = {
         title: 'Cases',
         robots: { index: false, follow: false },
       }
       ```

       **Settings (`(authenticated)/settings/page.tsx`):**
       ```typescript
       export const metadata: Metadata = {
         title: 'Settings',
         robots: { index: false, follow: false },
       }
       ```

       Apply similar pattern to: calendar, timeline, notifications pages.

    4. For dynamic routes (cases/[id]), use generateMetadata:
       ```typescript
       export async function generateMetadata(): Promise<Metadata> {
         return {
           title: 'Case Details',
           robots: { index: false, follow: false },
         }
       }
       ```
  </action>
  <verify>
    View source of each page shows correct title and description
    Authenticated pages have noindex meta tag
    Public pages have proper descriptions
  </verify>
  <done>All pages have appropriate metadata, authenticated pages are noindexed</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] robots.txt accessible at /robots.txt with correct disallow rules
- [ ] sitemap.xml accessible at /sitemap.xml with all public pages
- [ ] OpenGraph image exists (1200x630)
- [ ] Root layout has complete OpenGraph and Twitter metadata
- [ ] All public pages have SEO-friendly titles and descriptions
- [ ] All authenticated pages have `robots: { index: false }`
- [ ] Social media preview tools show correct metadata
</verification>

<success_criteria>
- robots.ts blocks authenticated routes from crawling
- sitemap.ts lists all public pages
- OpenGraph image created for social sharing
- Root metadata includes keywords, OpenGraph, Twitter cards
- All pages have appropriate page-level metadata
- Authenticated pages are excluded from indexing
</success_criteria>

<output>
After completion, create `.planning/phases/31-pwa-performance-seo/31-02-SUMMARY.md`
</output>
